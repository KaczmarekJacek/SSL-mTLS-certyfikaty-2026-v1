n not permitted
jk@1:pki-docker-generator$ sudo ./generate-certificates.sh
[sudo] password for jk: 

╔═══════════════════════════════════════════════════════════════════╗
║          PKI Certificate Generator v2.1 (Multi-Client)            ║
║        Java 25 | Spring 7 | Quarkus | Micronaut | K8s             ║
╚═══════════════════════════════════════════════════════════════════╝


=== Inicjalizacja struktury katalogów ===
[OK] Struktura katalogów gotowa

=== Tworzenie konfiguracji OpenSSL ===
[OK] Konfiguracja OpenSSL utworzona

=== Generowanie Root CA ===
[INFO] Generowanie klucza prywatnego Root CA (4096 bit)...
[INFO] Generowanie certyfikatu Root CA (self-signed)...
[OK] Root CA wygenerowany pomyślnie

=== Generowanie Intermediate CA ===
[INFO] Generowanie klucza prywatnego Intermediate CA...
[INFO] Generowanie CSR dla Intermediate CA...
[INFO] Podpisywanie Intermediate CA przez Root CA...
Using configuration from /export/root-ca/openssl.cnf
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number: 4096 (0x1000)
        Validity
            Not Before: Jan  5 18:41:02 2026 GMT
            Not After : Jan  3 18:41:02 2036 GMT
        Subject:
            countryName               = PL
            stateOrProvinceName       = Mazowieckie
            organizationName          = MyCompany
            organizationalUnitName    = IT Department
            commonName                = Intermediate CA
        X509v3 extensions:
            X509v3 Subject Key Identifier: 
                76:88:72:65:0D:37:84:86:4D:CF:2A:92:B9:DD:EE:F4:A7:5E:EF:32
            X509v3 Authority Key Identifier: 
                7F:DB:2B:5C:A8:29:EF:2D:AE:A9:72:EF:D1:4E:FF:97:02:56:FC:05
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:0
            X509v3 Key Usage: critical
                Digital Signature, Certificate Sign, CRL Sign
Certificate is to be certified until Jan  3 18:41:02 2036 GMT (3650 days)

Write out database with 1 new entries
Database updated
[INFO] Tworzenie łańcucha certyfikatów CA...
[OK] Intermediate CA wygenerowany i podpisany pomyślnie

=== Generowanie certyfikatu serwera ===
[INFO] Generowanie klucza prywatnego serwera...
[INFO] Generowanie CSR serwera...
[INFO] Podpisywanie certyfikatu serwera przez Intermediate CA...
Using configuration from /export/intermediate-ca/openssl.cnf
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number: 4096 (0x1000)
        Validity
            Not Before: Jan  5 18:41:04 2026 GMT
            Not After : Jan  5 18:41:04 2027 GMT
        Subject:
            countryName               = PL
            stateOrProvinceName       = Mazowieckie
            localityName              = Warszawa
            organizationName          = MyCompany
            organizationalUnitName    = IT Department
            commonName                = localhost
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            Netscape Cert Type: 
                SSL Server
            Netscape Comment: 
                OpenSSL Generated Server Certificate
            X509v3 Subject Key Identifier: 
                DB:A3:EC:FF:90:18:29:9D:D7:2C:02:86:76:BD:DD:18:6F:72:21:E0
            X509v3 Authority Key Identifier: 
                keyid:76:88:72:65:0D:37:84:86:4D:CF:2A:92:B9:DD:EE:F4:A7:5E:EF:32
                DirName:/C=PL/ST=Mazowieckie/L=Warszawa/O=MyCompany/OU=IT Department/CN=Root CA
                serial:10:00
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage: 
                TLS Web Server Authentication
            X509v3 Subject Alternative Name: 
                DNS:localhost, DNS:*.localhost, DNS:*.default.svc.cluster.local, DNS:*.svc.cluster.local, IP Address:127.0.0.1, IP Address:10.0.0.1
Certificate is to be certified until Jan  5 18:41:04 2027 GMT (365 days)

Write out database with 1 new entries
Database updated
[OK] Certyfikat serwera wygenerowany pomyślnie

=== Generowanie certyfikatów klientów ===

=== Generowanie certyfikatu klienta: default-client ===
[INFO] Generowanie klucza prywatnego klienta...
[INFO] Generowanie CSR klienta...
[INFO] Podpisywanie certyfikatu klienta przez Intermediate CA...
Using configuration from /export/intermediate-ca/openssl.cnf
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number: 4097 (0x1001)
        Validity
            Not Before: Jan  5 18:41:05 2026 GMT
            Not After : Jan  5 18:41:05 2027 GMT
        Subject:
            countryName               = PL
            stateOrProvinceName       = Mazowieckie
            localityName              = Warszawa
            organizationName          = MyCompany
            organizationalUnitName    = IT Department
            commonName                = default-client
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            Netscape Cert Type: 
                SSL Client, S/MIME
            Netscape Comment: 
                OpenSSL Generated Client Certificate
            X509v3 Subject Key Identifier: 
                D8:A3:08:00:49:FD:5D:00:1D:41:41:1F:AE:46:C3:C8:DA:CE:50:F2
            X509v3 Authority Key Identifier: 
                76:88:72:65:0D:37:84:86:4D:CF:2A:92:B9:DD:EE:F4:A7:5E:EF:32
            X509v3 Key Usage: critical
                Digital Signature, Non Repudiation, Key Encipherment
            X509v3 Extended Key Usage: 
                TLS Web Client Authentication, E-mail Protection
Certificate is to be certified until Jan  5 18:41:05 2027 GMT (365 days)

Write out database with 1 new entries
Database updated
[OK] Certyfikat klienta 'default-client' wygenerowany pomyślnie
[OK] Wszystkie certyfikaty klientów wygenerowane

=== Generowanie Java Keystores (PKCS12) ===
[INFO] Tworzenie server-keystore.p12...
[INFO] Tworzenie truststore.p12...
[INFO] Tworzenie keystores dla klientów...
[INFO] Tworzenie client-default-client-keystore.p12...
[OK] Java Keystores utworzone pomyślnie

=== Generowanie manifestów Kubernetes ===
[OK] Manifesty Kubernetes wygenerowane: ./certs/kubernetes/tls-secrets.yaml

=== Weryfikacja certyfikatów ===
[INFO] Weryfikacja łańcucha Root CA -> Intermediate CA...
/export/intermediate-ca/certs/intermediateCA.crt: OK
[INFO] Weryfikacja łańcucha CA -> Server Certificate...
/export/server/server.crt: OK
[INFO] Weryfikacja łańcucha CA -> Client Certificate (default-client)...
/export/clients/default-client/client.crt: OK
[OK] Wszystkie certyfikaty zweryfikowane pomyślnie

=== Podsumowanie ===

Wygenerowane pliki:

Root CA:
  - ./certs/root-ca/private/rootCA.key
  - ./certs/root-ca/certs/rootCA.crt

Intermediate CA:
  - ./certs/intermediate-ca/private/intermediateCA.key
  - ./certs/intermediate-ca/certs/intermediateCA.crt
  - ./certs/intermediate-ca/certs/ca-chain.crt

Server Certificate:
  - ./certs/server/server.key
  - ./certs/server/server.crt
  - ./certs/server/server-full-chain.crt

Client Certificates:
  - ./certs/clients/default-client/ (CN: default-client)

Java Keystores (PKCS12):
  - ./certs/java-keystores/server-keystore.p12
  - ./certs/java-keystores/truststore.p12
  - ./certs/java-keystores/client-default-client-keystore.p12
  - Hasło: changeit

Kubernetes:
  - ./certs/kubernetes/tls-secrets.yaml

Ważność certyfikatów:
  - Root CA:         7300 dni (~20 lat)
  - Intermediate CA: 3650 dni (~10 lat)
  - Server/Client:   365 dni